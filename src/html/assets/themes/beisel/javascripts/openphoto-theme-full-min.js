(function(b){function f(a){return typeof a=="object"?a:{top:a,left:a}}var j=b.scrollTo=function(a,c,d){b(window).scrollTo(a,c,d)};j.defaults={axis:"xy",duration:parseFloat(b.fn.jquery)>=1.3?0:1};j.window=function(){return b(window)._scrollable()};b.fn._scrollable=function(){return this.map(function(){if(this.nodeName&&b.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"])==-1)return this;var a=(this.contentWindow||this).document||this.ownerDocument||this;return b.browser.safari||
a.compatMode=="BackCompat"?a.body:a.documentElement})};b.fn.scrollTo=function(a,c,d){typeof c=="object"&&(d=c,c=0);typeof d=="function"&&(d={onAfter:d});a=="max"&&(a=9E9);d=b.extend({},j.defaults,d);c=c||d.speed||d.duration;d.queue=d.queue&&d.axis.length>1;d.queue&&(c/=2);d.offset=f(d.offset);d.over=f(d.over);return this._scrollable().each(function(){function e(b){m.animate(k,c,d.easing,b&&function(){b.call(this,a,d)})}var g=this,m=b(g),h=a,i,k={},p=m.is("html,body");switch(typeof h){case "number":case "string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(h)){h=
f(h);break}h=b(h,this);case "object":if(h.is||h.style)i=(h=b(h)).offset()}b.each(d.axis.split(""),function(a,c){var b=c=="x"?"Left":"Top",f=b.toLowerCase(),l="scroll"+b,n=g[l],o=j.max(g,c);i?(k[l]=i[f]+(p?0:n-m.offset()[f]),d.margin&&(k[l]-=parseInt(h.css("margin"+b))||0,k[l]-=parseInt(h.css("border"+b+"Width"))||0),k[l]+=d.offset[f]||0,d.over[f]&&(k[l]+=h[c=="x"?"width":"height"]()*d.over[f])):(b=h[f],k[l]=b.slice&&b.slice(-1)=="%"?parseFloat(b)/100*o:b);/^\d+$/.test(k[l])&&(k[l]=k[l]<=0?0:Math.min(k[l],
o));!a&&d.queue&&(n!=k[l]&&e(d.onAfterFirst),delete k[l])});e(d.onAfter)}).end()};j.max=function(a,c){var d=c=="x"?"Width":"Height",e="scroll"+d;if(!b(a).is("html,body"))return a[e]-b(a)[d.toLowerCase()]();var d="client"+d,g=a.ownerDocument.documentElement,m=a.ownerDocument.body;return Math.max(g[e],m[e])-Math.min(g[d],m[d])}})(jQuery);
(function(b){b.flexslider=function(f,j){var a=f;a.init=function(){a.vars=b.extend({},b.flexslider.defaults,j);a.data("flexslider",true);a.container=b(".slides",a);a.slides=b(".slides > li",a);a.count=a.slides.length;a.animating=false;a.currentSlide=a.vars.slideToStart;a.animatingTo=a.currentSlide;a.atEnd=a.currentSlide==0?true:false;a.eventType="ontouchstart"in document.documentElement?"touchstart":"click";a.cloneCount=0;a.cloneOffset=0;if(a.vars.controlsContainer!="")a.controlsContainer=b(a.vars.controlsContainer).eq(b(".slides").index(a.container)),
a.containerExists=a.controlsContainer.length>0;if(a.vars.manualControls!="")a.manualControls=b(a.vars.manualControls,a.containerExists?a.controlsContainer:a),a.manualExists=a.manualControls.length>0;a.vars.randomize&&(a.slides.sort(function(){return Math.round(Math.random())-0.5}),a.container.empty().append(a.slides));if(a.vars.animation.toLowerCase()=="slide"){a.css({overflow:"hidden"});if(a.vars.animationLoop)a.cloneCount=2,a.cloneOffset=1,a.container.append(a.slides.filter(":first").clone().addClass("clone")).prepend(a.slides.filter(":last").clone().addClass("clone"));
a.container.width((a.count+a.cloneCount)*a.width()+2E3);a.newSlides=b(".slides > li",a);setTimeout(function(){a.newSlides.width(a.width()).css({"float":"left"}).show()},100);a.container.css({marginLeft:-1*(a.currentSlide+a.cloneOffset)*a.width()+"px"})}else a.slides.css({width:"100%","float":"left",marginRight:"-100%"}).eq(a.currentSlide).fadeIn(400);if(a.vars.controlNav){if(a.manualExists)a.controlNav=a.manualControls;else{for(var c=b('<ol class="flex-control-nav"></ol>'),d=1,e=0;e<a.count;e++)c.append("<li><a>"+
d+"</a></li>"),d++;a.containerExists?(b(a.controlsContainer).append(c),a.controlNav=b(".flex-control-nav li a",a.controlsContainer)):(a.append(c),a.controlNav=b(".flex-control-nav li a",a))}a.controlNav.eq(a.currentSlide).addClass("active");a.controlNav.bind(a.eventType,function(c){c.preventDefault();b(this).hasClass("active")||a.flexAnimate(a.controlNav.index(b(this)),a.vars.pauseOnAction)})}if(a.vars.directionNav)c=b('<ul class="flex-direction-nav"><li><a class="prev" href="#">'+a.vars.prevText+
'</a></li><li><a class="next" href="#">'+a.vars.nextText+"</a></li></ul>"),a.containerExists?(b(a.controlsContainer).append(c),a.directionNav=b(".flex-direction-nav li a",a.controlsContainer)):(a.append(c),a.directionNav=b(".flex-direction-nav li a",a)),a.vars.animationLoop||(a.currentSlide==0?a.directionNav.filter(".prev").addClass("disabled"):a.currentSlide==a.count-1&&a.directionNav.filter(".next").addClass("disabled")),a.directionNav.bind(a.eventType,function(c){c.preventDefault();c=b(this).hasClass("next")?
a.getTarget("next"):a.getTarget("prev");a.canAdvance(c)&&a.flexAnimate(c,a.vars.pauseOnAction)});a.vars.keyboardNav&&b("ul.slides").length==1&&b(document).keyup(function(c){if(!a.animating&&!(c.keyCode!=39&&c.keyCode!=37)){if(c.keyCode==39)var d=a.getTarget("next");else c.keyCode==37&&(d=a.getTarget("prev"));a.canAdvance(d)&&a.flexAnimate(d,a.vars.pauseOnAction)}});if(a.vars.slideshow)a.vars.pauseOnHover&&a.vars.slideshow&&a.hover(function(){a.pause()},function(){a.resume()}),a.animatedSlides=setInterval(a.animateSlides,
a.vars.slideshowSpeed);if(a.vars.pausePlay)c=b('<div class="flex-pauseplay"><span></span></div>'),a.containerExists?(a.controlsContainer.append(c),a.pausePlay=b(".flex-pauseplay span",a.controlsContainer)):(a.append(c),a.pausePlay=b(".flex-pauseplay span",a)),c=a.vars.slideshow?"pause":"play",a.pausePlay.addClass(c).text(c=="pause"?a.vars.pauseText:a.vars.playText),a.pausePlay.click(function(c){c.preventDefault();b(this).hasClass("pause")?a.pause():a.resume()});a.vars.touchSwipe&&"ontouchstart"in
document.documentElement&&a.each(function(){function c(){this.removeEventListener("touchmove",d);e=null;isMoving=false}function d(b){isMoving&&(b=e-b.touches[0].pageX,Math.abs(b)>=f&&(c(),b=b>0?a.getTarget("next"):a.getTarget("prev"),a.canAdvance(b)&&a.flexAnimate(b,a.vars.pauseOnAction)))}function b(a){if(a.touches.length==1)e=a.touches[0].pageX,isMoving=true,this.addEventListener("touchmove",d,false)}var e,f=20;isMoving=false;"ontouchstart"in document.documentElement&&this.addEventListener("touchstart",
b,false)});a.vars.animation.toLowerCase()=="slide"&&b(window).resize(function(){a.newSlides.width(a.width());a.container.width((a.count+a.cloneCount)*a.width()+2E3);clearTimeout(a.sliderTimer);a.sliderTimer=setTimeout(function(){a.flexAnimate(a.currentSlide)},300)});a.vars.start(a)};a.flexAnimate=function(c,d){if(!a.animating)a.animating=true,a.animatingTo=c,a.vars.before(a),d&&a.pause(),a.vars.controlNav&&a.controlNav.removeClass("active").eq(c).addClass("active"),a.atEnd=c==0||c==a.count-1?true:
false,!a.vars.animationLoop&&a.vars.directionNav&&(c==0?a.directionNav.removeClass("disabled").filter(".prev").addClass("disabled"):c==a.count-1?a.directionNav.removeClass("disabled").filter(".next").addClass("disabled"):a.directionNav.removeClass("disabled")),!a.vars.animationLoop&&c==a.count-1&&(a.pause(),a.vars.end(a)),a.vars.animation.toLowerCase()=="slide"?(a.slideString=a.currentSlide==0&&c==a.count-1&&a.vars.animationLoop&&a.direction!="next"?"0px":a.currentSlide==a.count-1&&c==0&&a.vars.animationLoop&&
a.direction!="prev"?-1*(a.count+1)*a.slides.filter(":first").width()+"px":-1*(c+a.cloneOffset)*a.slides.filter(":first").width()+"px",a.container.animate({marginLeft:a.slideString},a.vars.animationDuration,function(){a.currentSlide==0&&c==a.count-1&&a.vars.animationLoop?a.container.css({marginLeft:-1*a.count*a.slides.filter(":first").width()+"px"}):a.currentSlide==a.count-1&&c==0&&a.vars.animationLoop&&a.container.css({marginLeft:-1*a.slides.filter(":first").width()+"px"});a.animating=false;a.currentSlide=
c;a.vars.after(a)})):(a.slides.eq(a.currentSlide).fadeOut(a.vars.animationDuration),a.slides.eq(c).fadeIn(a.vars.animationDuration,function(){a.animating=false;a.currentSlide=c;a.vars.after(a)}))};a.animateSlides=function(){a.animating||a.flexAnimate(a.currentSlide==a.count-1?0:a.currentSlide+1)};a.pause=function(){clearInterval(a.animatedSlides);a.vars.pausePlay&&a.pausePlay.removeClass("pause").addClass("play").text(a.vars.playText)};a.resume=function(){a.animatedSlides=setInterval(a.animateSlides,
a.vars.slideshowSpeed);a.vars.pausePlay&&a.pausePlay.removeClass("play").addClass("pause").text(a.vars.pauseText)};a.canAdvance=function(c){return!a.vars.animationLoop&&a.atEnd?a.currentSlide==0&&c==a.count-1&&a.direction!="next"?false:a.currentSlide==a.count-1&&c==0&&a.direction=="next"?false:true:true};a.getTarget=function(c){a.direction=c;return c=="next"?a.currentSlide==a.count-1?0:a.currentSlide+1:a.currentSlide==0?a.count-1:a.currentSlide-1};a.init()};b.flexslider.defaults={animation:"fade",
slideshow:true,slideshowSpeed:7E3,animationDuration:600,directionNav:true,controlNav:true,keyboardNav:true,touchSwipe:true,prevText:"Previous",nextText:"Next",pausePlay:false,pauseText:"Pause",playText:"Play",randomize:false,slideToStart:0,animationLoop:true,pauseOnAction:true,pauseOnHover:false,controlsContainer:"",manualControls:"",start:function(){},before:function(){},after:function(){},end:function(){}};b.fn.flexslider=function(f){return this.each(function(){b(this).find(".slides li").length==
1?b(this).find(".slides li").fadeIn(400):b(this).data("flexslider")!=true&&new b.flexslider(b(this),f)})}})(jQuery);
(function(b){function f(){var a=this,c=setTimeout(function(){a.$element.unbind(e);j.call(a)},500);this.$element.one(e,function(){clearTimeout(c);j.call(a)})}function j(){this.$element.hide().trigger("hidden");a.call(this)}function a(a){var d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.settings.backdrop){var g=b.support.transition&&d;this.$backdrop=b('<div class="modal-backdrop '+d+'" />').appendTo(document.body);this.settings.backdrop!="static"&&this.$backdrop.click(b.proxy(this.hide,
this));this.$backdrop.addClass("in");g?this.$backdrop.one(e,a):a()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),b.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e,b.proxy(c,this)):c.call(this)):a&&a()}function c(){this.$backdrop.remove();this.$backdrop=null}function d(){var a=this;this.isShown&&this.settings.keyboard?b(document).bind("keyup.modal",function(c){c.which==27&&a.hide()}):this.isShown||b(document).unbind("keyup.modal")}var e;b(document).ready(function(){var a=
(document.body||document.documentElement).style;b.support.transition=a.transition!==void 0||a.WebkitTransition!==void 0||a.MozTransition!==void 0||a.MsTransition!==void 0||a.OTransition!==void 0;b.support.transition&&(e="TransitionEnd",b.browser.webkit?e="webkitTransitionEnd":b.browser.mozilla?e="transitionend":b.browser.opera&&(e="oTransitionEnd"))});var g=function(a,c){this.settings=b.extend({},b.fn.modal.defaults,c);this.$element=b(a).delegate(".close","click.modal",b.proxy(this.hide,this));this.settings.show&&
this.show();return this};g.prototype={toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var c=this;this.isShown=true;this.$element.trigger("show");d.call(this);a.call(this,function(){var a=b.support.transition&&c.$element.hasClass("fade");c.$element.appendTo(document.body).show();c.$element.addClass("in");a?c.$element.one(e,function(){c.$element.trigger("shown")}):c.$element.trigger("shown")});return this},hide:function(a){a&&a.preventDefault();if(!this.isShown)return this;
this.isShown=false;d.call(this);this.$element.trigger("hide").removeClass("in");b.support.transition&&this.$element.hasClass("fade")?f.call(this):j.call(this);return this}};b.fn.modal=function(a){var c=this.data("modal");if(!c)return typeof a=="string"&&(a={show:/show|toggle/.test(a)}),this.each(function(){b(this).data("modal",new g(this,a))});if(a===true)return c;if(typeof a=="string")c[a]();else c&&c.toggle();return this};b.fn.modal.Modal=g;b.fn.modal.defaults={backdrop:false,keyboard:false,show:false};
b(document).ready(function(){b("body").delegate("[data-controls-modal]","click",function(a){a.preventDefault();a=b(this).data("show",true);b("#"+a.attr("data-controls-modal")).modal(a.data())})})})(window.jQuery||window.ender);
var opTheme=function(){var b=null,f=function(a){console!==void 0&&console.log!==void 0&&console.log(a)},j=function(a){var d="";arguments.length>1&&(arguments[1]=="error"?d="error":arguments[1]=="confirm"&&(d="success"));return'<div class="alert-message block-message '+d+'"><a class="modal-close-click close" href="#">x</a>'+a+"</div>"},a=void 0;return{callback:{keyboard:function(){f("keyboard!!!!")},actionDelete:function(a){a.preventDefault();var a=$(a.target),d=a.attr("href")+".json",b=a.attr("data-id");
OP.Util.makeRequest(d,a.parent().serializeArray(),function(a){a.code===200?$(".action-container-"+b).hide("medium",function(){$(this).remove()}):opTheme.message.error("Could not delete the photo.")});return false},batchAdd:function(a){$(".id-"+a.id).removeClass("unpinned").addClass("pinned");opTheme.ui.batchMessage();f("Adding photo "+a.id)},batchClear:function(){var a=$("#batch-message").parent();$(".pinned").removeClass("pinned").addClass("unpinned").children().filter(".pin").fadeOut();a.slideUp("fast",
function(){$(this).remove()})},batchModal:function(){$("#modal").html('<div class="modal-header">  <a href="#" class="close">&times;</a>  <h3>Batch edit your pinned photos</h3></div><div class="modal-body">  <p><form id="batch-edit">  <div class="clearfix">    <label>Property</label>    <div class="input">      <select id="batch-key" name="property"><option value="permission">Permission</option></select>    </div>  </div>  <div class="clearfix">    <label>Value</label>    <div class="input">      <ul class="inputs-list">        <li>          <label>            <input type="radio" name="permission" value="1" checked="checked">            <span>Public</span>          </label>        </li>        <li>          <label>            <input type="radio" name="permission" value="0">             <span>Private</span>          </label>        </li>    </div>  </div></form></p></div><div class="modal-footer"><a href="#" class="btn photo-update-batch-click">Update</a></div>')},
batchRemove:function(a){$(".id-"+a).addClass("unpinned").removeClass("pinned");opTheme.ui.batchMessage();f("Removing photo "+a)},commentJump:function(a){a.preventDefault();$.scrollTo($("div.comment-form"),200);return false},credentailDelete:function(a){a.preventDefault();var d=$(a.target),a=d.attr("href")+".json";OP.Util.makeRequest(a,{},function(a){a.code===200?(d.parent().remove(),opTheme.message.confirm("Credential successfully deleted.")):opTheme.message.error("Could not delete credential.")});
return false},groupCheckbox:function(a){a=$(a.target);a.hasClass("none")&&a.is(":checked")?$("input.group-checkbox:not(.none)").removeAttr("checked"):a.is(":checked")&&$("input.group-checkbox.none").removeAttr("checked")},groupPost:function(a){a.preventDefault();var a=$(a.target).parent(),d=a.attr("action")+".json",b=d.search("create")>-1;OP.Util.makeRequest(d,a.serializeArray(),function(a){a.code===200?b?location.href=location.href:opTheme.message.confirm("Group updated successfully."):opTheme.message.error("Could not update group.")});
return false},login:function(a){a=$(a.target);a.hasClass("browserid")?navigator.id.getVerifiedEmail(function(a){a?opTheme.user.browserid.loginSuccess(a):opTheme.user.browserid.loginFailure(a)}):a.hasClass("facebook")&&FB.login(function(a){a.authResponse?(console.log("User logged in, posting to openphoto host."),OP.Util.makeRequest("/user/facebook/login.json",opTheme.user.base.loginProcessed)):console.log("User cancelled login or did not fully authorize.")},{scope:"email"})},modalClose:function(a){a.preventDefault();
$(a.target).parent().slideUp("fast",function(){$(this).remove()})},photoDelete:function(a){a.preventDefault();var b=$(a.target),a=b.parent().attr("action")+".json";OP.Util.makeRequest(a,b.parent().serializeArray(),function(a){a.code===200?(b.html("This photo has been deleted"),opTheme.message.confirm("This photo has been deleted.")):opTheme.message.error("Could not delete the photo.")});return false},photoEdit:function(a){a.preventDefault();a=$(a.target).attr("href")+".json";$("div.owner-edit").length==
1?$.scrollTo($("div.owner-edit"),200):OP.Util.makeRequest(a,{},function(a){a.code===200?($("#main").append(a.result.markup),$.scrollTo($("div.owner-edit"),200)):opTheme.message.error("Could not load the form to edit this photo.")},"json","get");return false},photoUpdateBatch:function(a){a.preventDefault();$(a.target);var a=$("#batch-key").val(),d=$("form#batch-edit").find("input[name~='permission']:checked").val();params={crumb:b};params[a]=d;params.ids=OP.Batch.collection.getIds().join(",");console.log(params);
OP.Util.makeRequest("/photos/update.json",params,opTheme.callback.photoUpdateBatchCb,"json","post")},photoUpdateBatchCb:function(a){a.code==200?opTheme.message.append(j("Your photos were successfully updated.","confirm")):opTheme.message.append(j("There was a problem updating your photos.","error"));$("#modal").modal("hide")},pinClick:function(a){var a=$(a.target),b=a.attr("data-id");a.parent().hasClass("unpinned")?OP.Batch.add(b):OP.Batch.remove(b)},pinClearClick:function(a){a.preventDefault();OP.Batch.clear()},
pinOver:function(a){$(a.target).parent().prev().fadeIn("fast")},pinOut:function(a){$(a.target).filter('[class~="unpinned"]').children().filter(".pin").filter(":visible").fadeOut("fast")},pluginStatus:function(a){a.preventDefault();a=$(a.target).attr("href")+".json";OP.Util.makeRequest(a,{},function(a){a.code===200?window.location.reload():opTheme.message.error("Could not update the status of this plugin.")},"json","post");return false},pluginUpdate:function(a){a.preventDefault();var a=$(a.target).parent(),
b=a.attr("action")+".json";OP.Util.makeRequest(b,a.serializeArray(),function(a){a.code===200?opTheme.message.confirm("Your plugin was successfully updated."):opTheme.message.error("Could not update the status of this plugin.")},"json","post");return false},searchByTags:function(a){a.preventDefault();var b=$(a.target).parent(),a=$(b.find("input[name=tags]")[0]).val(),b=$(b).attr("action");location.href=a.length>0?b.replace("/list","")+"/tags-"+a+"/list":b;return false},settings:function(){$("ul#settingsbar").slideToggle("medium");
$("li#nav-signin").toggleClass("active");return false},keyBrowseNext:function(){var a;if(a=$(".image-pagination .next a").attr("href"))location.href=a},keyBrowsePrevious:function(){var a;if(a=$(".image-pagination .previous a").attr("href"))location.href=a},webhookDelete:function(a){a.preventDefault();var b=$(a.target),a=b.attr("href")+".json";OP.Util.makeRequest(a,{},function(a){a.code===200?(b.parent().remove(),opTheme.message.confirm("Credential successfully deleted.")):opTheme.message.error("Could not delete credential.")});
return false}},formHandlers:{hasErrors:function(a,b){var e=[];a.children("input, textarea").each(function(){var g=$(this);g.prev().removeClass("error");var f=g.attr(b);if(f!=void 0)for(var f=f.split(" "),h=0;h<f.length;h++){if(f[h]=="date"&&!opTheme.formHandlers.passesDate(g)){var i=g.prev().html()+" is not a valid date";e.push([g,i])}f[h]=="email"&&!opTheme.formHandlers.passesEmail(g)&&(i=g.prev().html()+" is not a valid email address",e.push([g,i]));f[h]=="ifexists"&&g.val()!=""&&g.val()!=void 0&&
$.merge(e,opTheme.formHandlers.hasErrors(a,"data-ifexists"));f[h]=="integer"&&!opTheme.formHandlers.passesInteger(g)&&(i=g.prev().html()+" is not a number",e.push([g,i]));f[h]=="match"&&(i=g.attr("data-match"),opTheme.formHandlers.passesMatch(g,i)||(i=g.prev().html()+" does not match "+$("#"+i).prev().html(),e.push([g,i])));f[h]=="required"&&!opTheme.formHandlers.passesRequired(g)&&(i=g.prev().html()+" is required",e.push([g,i]));f[h]=="alphanumeric"&&!opTheme.formHandlers.passesAlphaNumeric(g)&&
(i=g.prev().html()+" can only contain alpha-numeric characters",e.push([g,i]))}});return e},init:function(){$(this).submit(opTheme.submitHandlers.siteForm);opTheme.formHandlers.showPlaceholders();$("input[data-placeholder]").live("focus",opTheme.formHandlers.placeholderFocus);$("input[data-placeholder]").live("blur",opTheme.formHandlers.placeholderBlur)},passesAlphaNumeric:function(a){return/^[a-zA-Z0-9]+$/.test(a.val())},passesDate:function(a){return/^\d{1,2}\/\d{1,2}\/\d{4}$/.test(a.val())},passesEmail:function(a){return/^([\w-\.+]+@([\w-]+\.)+[\w-]{2,4})?$/.test(a.val())},
passesInteger:function(a){return/^\d+$/.test(a.val())},passesMatch:function(a,b){return a.val()==$("#"+b).val()},passesRequired:function(a){return a.is("textarea")||a.is("input")&&(a.attr("type")=="text"||a.attr("type")=="password")?a.val()!=""&&a.val()!=void 0:a.is("checkbox")?a.is(":checked"):true},placeholderBlur:function(){var a=$(this);a.val()==""&&(a.val(a.attr("data-placeholder")),a.addClass("placeholder"))},placeholderFocus:function(){var a=$(this);a.val()==a.attr("data-placeholder")&&(a.val(""),
a.removeClass("placeholder"))},removePlaceholders:function(){$("input[data-placeholder]").each(function(){var a=$(this);a.val()==a.attr("data-placeholder")&&(a.val(""),a.removeClass("placeholder"))})},showPlaceholders:function(){$("input[data-placeholder]").each(function(){var a=$(this);a.val()==""&&(a.val(a.attr("data-placeholder")),a.addClass("placeholder"))})}},front:{init:function(a){a.length>0&&a.cycle({fx:"fade"}).find("img").click(function(a){location.href=$(a.target).attr("data-origin")})}},
init:{load:function(a){b=a;$("section#slideshow").length>0&&$(window).load(function(){$(".flexslider").flexslider({animation:"slide",controlsContainer:".flex-container",controlNav:true,pausePlay:false,directionNav:true,nextText:"<span title='Next'>Next</span>",prevText:"<span title='Previous'>Previous</span>"})});$("#modal").modal({keyboard:true})},attach:function(){OP.Util.on("click:action-delete",opTheme.callback.actionDelete);OP.Util.on("click:action-jump",opTheme.callback.commentJump);OP.Util.on("click:batch-modal",
opTheme.callback.batchModal);OP.Util.on("click:credential-delete",opTheme.callback.credentailDelete);OP.Util.on("click:group-checkbox",opTheme.callback.groupCheckbox);OP.Util.on("click:group-update",opTheme.callback.groupPost);OP.Util.on("click:login",opTheme.callback.login);OP.Util.on("click:modal-close",opTheme.callback.modalClose);OP.Util.on("click:photo-delete",opTheme.callback.photoDelete);OP.Util.on("click:photo-edit",opTheme.callback.photoEdit);OP.Util.on("click:photo-update-batch",opTheme.callback.photoUpdateBatch);
OP.Util.on("click:plugin-status",opTheme.callback.pluginStatus);OP.Util.on("click:plugin-update",opTheme.callback.pluginUpdate);OP.Util.on("click:nav-item",opTheme.callback.searchBarToggle);OP.Util.on("click:search",opTheme.callback.searchByTags);OP.Util.on("click:settings",opTheme.callback.settings);OP.Util.on("click:webhook-delete",opTheme.callback.webhookDelete);OP.Util.on("click:pin",opTheme.callback.pinClick);OP.Util.on("click:pin-clear",opTheme.callback.pinClearClick);OP.Util.on("keydown:browse-next",
opTheme.callback.keyBrowseNext);OP.Util.on("keydown:browse-previous",opTheme.callback.keyBrowsePrevious);OP.Util.on("mouseover:pin",opTheme.callback.pinOver);OP.Util.on("mouseout:pin",opTheme.callback.pinOut);OP.Util.on("callback:batch-add",opTheme.callback.batchAdd);OP.Util.on("callback:batch-remove",opTheme.callback.batchRemove);OP.Util.on("callback:batch-clear",opTheme.callback.batchClear);typeof OPU==="object"&&OPU.init();$("form.validate").each(opTheme.formHandlers.init)},photos:function(){var a=
OP.Batch.collection.getAll(),b=OP.Batch.collection.getLength(),e=$(".unpinned"),g,f;b>0&&opTheme.ui.batchMessage();e.each(function(b,d){d=$(d);g=d.attr("class");f=g.match(/ id-([a-z0-9]+)/);f.length==2&&a[f[1]]!==void 0&&d.removeClass("unpinned").addClass("pinned")})}},message:{append:function(a){$("#message").append(a).slideDown()},close:function(){a!=void 0&&(clearTimeout(a),a=void 0,$("#message-box").animate({height:"toggle"},500,function(){$("#message-box").remove()}))},confirm:function(a){opTheme.message.show(a,
"confirm")},error:function(a){opTheme.message.show(a,"error")},show:function(b,d){var e=d=="error"?"confirm":"error";a!=void 0?(clearTimeout(a),a=void 0,$("#message-box").removeClass(e).addClass(d).html('<div><a class="message-close">close</a>'+b+"</div>"),a=setTimeout(function(){$("#message-box").animate({height:"toggle"},500,function(){$("#message-box").remove();a=void 0})},7E3)):($("html").append('<section id="message-box" style="display:none;"><div><a class="message-close">close</a>'+b+"</div></section>"),
$("#message-box").removeClass(e).addClass(d).animate({height:"toggle"},500,function(){a=setTimeout(function(){$("#message-box").animate({height:"toggle"},500,function(){$("#message-box").remove();a=void 0})},7E3)}));$("a.message-close").click(opTheme.message.close)}},submitHandlers:{siteForm:function(a){var b=$(this);a.preventDefault();opTheme.formHandlers.removePlaceholders();a=opTheme.formHandlers.hasErrors(b,"data-validation");opTheme.formHandlers.showPlaceholders();if(a.length==0)this.submit();
else{for(var b="<ul>",e=0;e<a.length;e++)a[e][0].prev().addClass("error"),b+="<li>"+a[e][1]+"</li>";b+="</ul>";$("html").animate({scrollTop:a[0][0].offset().top-30},500);a[0][0].focus();opTheme.message.error(b)}}},ui:{batchMessage:function(){var a=OP.Batch.collection.getLength();$("#batch-message").length>0&&a>0?$("#batch-count").html(a):a==0?$("#batch-message").parent().slideUp("fast",function(){$(this).remove()}):opTheme.message.append(j('  <a id="batch-message"></a>You have <span id="batch-count">'+
a+'</span> photos pinned.  <div class="alert-actions"><a class="btn small info batch-modal-click" data-controls-modal="modal" data-backdrop="static">Batch edit</a><a href="#" class="btn small pin-clear-click">Or clear pins</a></div>'))}},user:{base:{loginProcessed:function(a){a.code!=200?f("processing of login failed"):(f("login processing succeeded"),window.location.reload())}},browserid:{loginFailure:function(){f("login failed")},loginSuccess:function(a){OP.Util.makeRequest("/user/browserid/login.json",
{assertion:a},opTheme.user.base.loginProcessed)}}}}}();

window.JSON||(window.JSON={});
(function(){function c(b){return 10>b?"0"+b:b}function m(b){return f.lastIndex=0,f.test(b)?'"'+b.replace(f,function(b){var a=k[b];return"string"==typeof a?a:"\\u"+("0000"+b.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+b+'"'}function j(b,i){var a,c,f,k,h=g,e,d=i[b];d&&"object"==typeof d&&"function"==typeof d.toJSON&&(d=d.toJSON(b));"function"==typeof n&&(d=n.call(i,b,d));switch(typeof d){case "string":return m(d);case "number":return isFinite(d)?""+d:"null";case "boolean":case "null":return""+d;
case "object":if(!d)return"null";g+=o;e=[];if("[object Array]"===Object.prototype.toString.apply(d)){k=d.length;for(a=0;a<k;a+=1)e[a]=j(a,d)||"null";return f=0===e.length?"[]":g?"[\n"+g+e.join(",\n"+g)+"\n"+h+"]":"["+e.join(",")+"]",g=h,f}if(n&&"object"==typeof n){k=n.length;for(a=0;a<k;a+=1)c=n[a],"string"==typeof c&&(f=j(c,d),f&&e.push(m(c)+(g?": ":":")+f))}else for(c in d)Object.hasOwnProperty.call(d,c)&&(f=j(c,d),f&&e.push(m(c)+(g?": ":":")+f));return f=0===e.length?"{}":g?"{\n"+g+e.join(",\n"+
g)+"\n"+h+"}":"{"+e.join(",")+"}",g=h,f}}"use strict";"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+c(this.getUTCMonth()+1)+"-"+c(this.getUTCDate())+"T"+c(this.getUTCHours())+":"+c(this.getUTCMinutes())+":"+c(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var b=window.JSON,i=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
f=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,g,o,k={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},n;"function"!=typeof b.stringify&&(b.stringify=function(b,i,a){var c;g="";o="";if("number"==typeof a)for(c=0;c<a;c+=1)o+=" ";else"string"==typeof a&&(o=a);n=i;if(!i||"function"==typeof i||"object"==typeof i&&"number"==typeof i.length)return j("",{"":b});throw Error("JSON.stringify");
});"function"!=typeof b.parse&&(b.parse=function(b,c){function a(b,i){var h,e,d=b[i];if(d&&"object"==typeof d)for(h in d)Object.hasOwnProperty.call(d,h)&&(e=a(d,h),void 0!==e?d[h]=e:delete d[h]);return c.call(b,i,d)}var f;b=""+b;i.lastIndex=0;i.test(b)&&(b=b.replace(i,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(b.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,
"")))return f=eval("("+b+")"),"function"==typeof c?a({"":f},""):f;throw new SyntaxError("JSON.parse");})})();(function(c,m){var j=c.History=c.History||{},b=c.jQuery;if("undefined"!=typeof j.Adapter)throw Error("History.js Adapter has already been loaded...");j.Adapter={bind:function(i,c,g){b(i).bind(c,g)},trigger:function(c,f,g){b(c).trigger(f,g)},extractEventData:function(b,c,g){return c&&c.originalEvent&&c.originalEvent[b]||g&&g[b]||m},onDomLoad:function(c){b(c)}};"undefined"!=typeof j.init&&j.init()})(window);
(function(c){var m=c.document,j=c.setInterval||j,b=c.History=c.History||{};if("undefined"!=typeof b.initHtml4)throw Error("History.js HTML4 Support has already been loaded...");b.initHtml4=function(){if("undefined"!=typeof b.initHtml4.initialized)return!1;b.initHtml4.initialized=!0;b.enabled=!0;b.savedHashes=[];b.isLastHash=function(c){var f=b.getHashByIndex(),g;return g=c===f,g};b.saveHash=function(c){return b.isLastHash(c)?!1:(b.savedHashes.push(c),!0)};b.getHashByIndex=function(b){return null};
b.discardedHashes={};b.discardedStates={};b.discardState=function(c,f,g){var j=b.getHashByState(c),k;return k={discardedState:c,backState:g,forwardState:f},b.discardedStates[j]=k,!0};b.discardHash=function(c,f,g){return b.discardedHashes[c]={discardedHash:c,backState:g,forwardState:f},!0};b.discardedState=function(c){var c=b.getHashByState(c),f;return f=b.discardedStates[c]||!1,f};b.discardedHash=function(c){return b.discardedHashes[c]||!1};b.recycleState=function(c){var f=b.getHashByState(c);return b.discardedState(c)&&
delete b.discardedStates[f],!0};b.emulated.hashChange&&(b.hashChangeInit=function(){b.checkerFunction=null;var i="",f,g,o;return b.isInternetExplorer()?(f=m.createElement("iframe"),f.setAttribute("id","historyjs-iframe"),f.style.display="none",m.body.appendChild(f),f.contentWindow.document.open(),f.contentWindow.document.close(),g="",o=!1,b.checkerFunction=function(){if(o)return!1;o=!0;var k=b.getHash()||"",j=b.unescapeHash(f.contentWindow.document.location.hash)||"";return k!==i?(i=k,j!==k&&(g=k,
f.contentWindow.document.open(),f.contentWindow.document.close(),f.contentWindow.document.location.hash=b.escapeHash(k)),b.Adapter.trigger(c,"hashchange")):j!==g&&(g=j,b.setHash(j,!1)),o=!1,!0}):b.checkerFunction=function(){var f=b.getHash();return f!==i&&(i=f,b.Adapter.trigger(c,"hashchange")),!0},b.intervalList.push(j(b.checkerFunction,b.options.hashChangeInterval)),!0},b.Adapter.onDomLoad(b.hashChangeInit));b.emulated.pushState&&(b.onHashChange=function(i){var i=b.getHashByUrl(i&&i.newURL||m.location.href),
f=null,g;return b.isLastHash(i)?(b.busy(!1),!1):(b.doubleCheckComplete(),b.saveHash(i),i&&b.isTraditionalAnchor(i)?(b.Adapter.trigger(c,"anchorchange"),b.busy(!1),!1):(f=b.extractState(b.getFullUrl(i||m.location.href,!1),!0),b.isLastSavedState(f)?(b.busy(!1),!1):(b.getHashByState(f),g=b.discardedState(f),g?(b.getHashByIndex(-2)===b.getHashByState(g.forwardState)?b.back(!1):b.forward(!1),!1):(b.pushState(f.data,f.title,f.url,!1),!0))))},b.Adapter.bind(c,"hashchange",b.onHashChange),b.pushState=function(i,
f,g,j){if(b.getHashByUrl(g))throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==j&&b.busy())return b.pushQueue({scope:b,callback:b.pushState,args:arguments,queue:j}),!1;b.busy(!0);var k=b.createStateObject(i,f,g),n=b.getHashByState(k),l=b.getState(!1),l=b.getHashByState(l),q=b.getHash();return b.storeState(k),b.expectedStateId=k.id,b.recycleState(k),b.setTitle(k),n===l?(b.busy(!1),!1):n!==q&&n!==b.getShortUrl(m.location.href)?(b.setHash(n,!1),!1):
(b.saveState(k),b.Adapter.trigger(c,"statechange"),b.busy(!1),!0)},b.replaceState=function(c,f,g,j){if(b.getHashByUrl(g))throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==j&&b.busy())return b.pushQueue({scope:b,callback:b.replaceState,args:arguments,queue:j}),!1;b.busy(!0);var k=b.createStateObject(c,f,g),m=b.getState(!1),l=b.getStateByIndex(-2);return b.discardState(m,k,l),b.pushState(k.data,k.title,k.url,!1),!0});b.emulated.pushState&&b.getHash()&&
!b.emulated.hashChange&&b.Adapter.onDomLoad(function(){b.Adapter.trigger(c,"hashchange")})};"undefined"!=typeof b.init&&b.init()})(window);
(function(c,m){var j=c.console||m,b=c.document,i=c.navigator,f=c.sessionStorage||!1,g=c.setTimeout,o=c.clearTimeout,k=c.setInterval,n=c.clearInterval,l=c.JSON,q=c.alert,a=c.History=c.History||{},p=c.history;l.stringify=l.stringify||l.encode;l.parse=l.parse||l.decode;if("undefined"!=typeof a.init)throw Error("History.js Core has already been loaded...");a.init=function(){return"undefined"==typeof a.Adapter?!1:("undefined"!=typeof a.initCore&&a.initCore(),"undefined"!=typeof a.initHtml4&&a.initHtml4(),
!0)};a.initCore=function(){if("undefined"!=typeof a.initCore.initialized)return!1;a.initCore.initialized=!0;a.options=a.options||{};a.options.hashChangeInterval=a.options.hashChangeInterval||100;a.options.safariPollInterval=a.options.safariPollInterval||500;a.options.doubleCheckInterval=a.options.doubleCheckInterval||500;a.options.storeInterval=a.options.storeInterval||1E3;a.options.busyDelay=a.options.busyDelay||250;a.options.debug=a.options.debug||!1;a.options.initialTitle=a.options.initialTitle||
b.title;a.intervalList=[];a.clearAllIntervals=function(){var h,b=a.intervalList;if("undefined"!=typeof b&&null!==b){for(h=0;h<b.length;h++)n(b[h]);a.intervalList=null}};a.debug=function(){a.options.debug&&a.log.apply(a,arguments)};a.log=function(){var a="undefined"!=typeof j&&"undefined"!=typeof j.log&&"undefined"!=typeof j.log.apply,e=b.getElementById("log"),d,c,f,g;a?(c=Array.prototype.slice.call(arguments),d=c.shift(),"undefined"!=typeof j.debug?j.debug.apply(j,[d,c]):j.log.apply(j,[d,c])):d="\njmathai\n";
for(c=1,f=arguments.length;c<f;++c){g=arguments[c];if("object"==typeof g&&"undefined"!=typeof l)try{g=l.stringify(g)}catch(i){}d+="\n"+g+"\n"}return e?(e.value+=d+"\n-----\n",e.scrollTop=e.scrollHeight-e.clientHeight):a||q(d),!0};a.getInternetExplorerMajorVersion=function(){var h=a.getInternetExplorerMajorVersion,e;if("undefined"!=typeof a.getInternetExplorerMajorVersion.cached)e=a.getInternetExplorerMajorVersion.cached;else{e=3;for(var d=b.createElement("div"),c=d.getElementsByTagName("i");(d.innerHTML=
"<\!--[if gt IE "+ ++e+"]><i></i><![endif]--\>")&&c[0];);e=4<e?e:!1}return h.cached=e};a.isInternetExplorer=function(){return a.isInternetExplorer.cached="undefined"!=typeof a.isInternetExplorer.cached?a.isInternetExplorer.cached:Boolean(a.getInternetExplorerMajorVersion())};a.emulated={pushState:!Boolean(c.history&&c.history.pushState&&c.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(i.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(i.userAgent)),hashChange:Boolean(!("onhashchange"in
c||"onhashchange"in b)||a.isInternetExplorer()&&8>a.getInternetExplorerMajorVersion())};a.enabled=!a.emulated.pushState;a.bugs={setHash:Boolean(!a.emulated.pushState&&"Apple Computer, Inc."===i.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),safariPoll:Boolean(!a.emulated.pushState&&"Apple Computer, Inc."===i.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(i.userAgent)),ieDoubleCheck:Boolean(a.isInternetExplorer()&&8>a.getInternetExplorerMajorVersion()),hashEscape:Boolean(a.isInternetExplorer()&&
7>a.getInternetExplorerMajorVersion())};a.isEmptyObject=function(a){for(var b in a)return!1;return!0};a.cloneObject=function(a){var b,d;return a?(b=l.stringify(a),d=l.parse(b)):d={},d};a.getRootUrl=function(){var a=b.location.protocol+"//"+(b.location.hostname||b.location.host);b.location.port&&(a+=":"+b.location.port);return a+="/",a};a.getBaseHref=function(){var a=b.getElementsByTagName("base"),e="";return 1===a.length&&(e=null.href.replace(/[^\/]+$/,"")),e=e.replace(/\/+$/,""),e&&(e+="/"),e};a.getBaseUrl=
function(){return a.getBaseHref()||a.getBasePageUrl()||a.getRootUrl()};a.getPageUrl=function(){var h;return h=((a.getState(!1,!1)||{}).url||b.location.href).replace(/\/+$/,"").replace(/[^\/]+$/,function(a){return/\./.test(a)?a:a+"/"}),h};a.getBasePageUrl=function(){return b.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/"};a.getFullUrl=function(h,b){var d=h,c=h.substring(0,1);return b="undefined"==typeof b?!0:b,/[a-z]+\:\/\//.test(h)||
("/"===c?d=a.getRootUrl()+h.replace(/^\/+/,""):"#"===c?d=a.getPageUrl().replace(/#.*/,"")+h:"?"===c?d=a.getPageUrl().replace(/[\?#].*/,"")+h:b?d=a.getBaseUrl()+h.replace(/^(\.\/)+/,""):d=a.getBasePageUrl()+h.replace(/^(\.\/)+/,"")),d.replace(/\#$/,"")};a.getShortUrl=function(h){var b=a.getBaseUrl(),d=a.getRootUrl();return a.emulated.pushState&&(h=h.replace(b,"")),h=h.replace(d,"/"),a.isTraditionalAnchor(h)&&(h="./"+h),h=h.replace(/^(\.\/)+/g,"./").replace(/\#$/,""),h};a.store={};a.idToState=a.idToState||
{};a.stateToId=a.stateToId||{};a.urlToId=a.urlToId||{};a.storedStates=a.storedStates||[];a.savedStates=a.savedStates||[];a.normalizeStore=function(){a.store.idToState=a.store.idToState||{};a.store.urlToId=a.store.urlToId||{};a.store.stateToId=a.store.stateToId||{}};a.getState=function(h,b){"undefined"==typeof h&&(h=!0);"undefined"==typeof b&&(b=!0);var d=a.getLastSavedState();return!d&&b&&(d=a.createStateObject()),h&&(d=a.cloneObject(d),d.url=d.cleanUrl||d.url),d};a.getIdByState=function(b){var e=
a.extractId(b.url),d;if(!e)if(d=a.getStateString(b),"undefined"!=typeof a.stateToId[d])e=a.stateToId[d];else if("undefined"!=typeof a.store.stateToId[d])e=a.store.stateToId[d];else{for(;!(e=(new Date).getTime()+(""+Math.random()).replace(/\D/g,""),"undefined"==typeof a.idToState[e]&&"undefined"==typeof a.store.idToState[e]););a.stateToId[d]=e;a.idToState[e]=b}return e};a.normalizeState=function(h){var e;if(!h||"object"!=typeof h)h={};if("undefined"!=typeof h.normalized)return h;if(!h.data||"object"!=
typeof h.data)h.data={};e={};e.normalized=!0;e.title=h.title||"";e.url=a.getFullUrl(a.unescapeString(h.url||b.location.href));e.hash=a.getShortUrl(e.url);e.data=a.cloneObject(h.data);e.id=a.getIdByState(e);e.cleanUrl=e.url.replace(/\??\&_suid.*/,"");e.url=e.cleanUrl;h=!a.isEmptyObject(e.data);if(e.title||h)e.hash=a.getShortUrl(e.url).replace(/\??\&_suid.*/,""),/\?/.test(e.hash)||(e.hash+="?"),e.hash+="&_suid="+e.id;return e.hashedUrl=a.getFullUrl(e.hash),(a.emulated.pushState||a.bugs.safariPoll)&&
a.hasUrlDuplicate(e)&&(e.url=e.hashedUrl),e};a.createStateObject=function(b,e,d){b={data:b,title:e,url:d};return b=a.normalizeState(b),b};a.getStateById=function(b){b=""+b;return a.idToState[b]||a.store.idToState[b]||m};a.getStateString=function(b){var e,d,c;return e=a.normalizeState(b),d={data:e.data,title:b.title,url:b.url},c=l.stringify(d),c};a.getStateId=function(b){var e,d;return e=a.normalizeState(b),d=e.id,d};a.getHashByState=function(b){var e,d;return e=a.normalizeState(b),d=e.hash,d};a.extractId=
function(a){var b,d;return d=/(.*)\&_suid=([0-9]+)$/.exec(a),b=d?""+(d[2]||""):"",b||!1};a.isTraditionalAnchor=function(a){return!/[\/\?\.]/.test(a)};a.extractState=function(b,e){var d=null,c,f;return e=e||!1,c=a.extractId(b),c&&(d=a.getStateById(c)),d||(f=a.getFullUrl(b),c=a.getIdByUrl(f)||!1,c&&(d=a.getStateById(c)),!d&&e&&!a.isTraditionalAnchor(b)&&(d=a.createStateObject(null,null,f))),d};a.getIdByUrl=function(b){return a.urlToId[b]||a.store.urlToId[b]||m};a.getLastSavedState=function(){return a.savedStates[a.savedStates.length-
1]||m};a.getLastStoredState=function(){return a.storedStates[a.storedStates.length-1]||m};a.hasUrlDuplicate=function(b){var e=!1,d;return d=a.extractState(b.url),e=d&&d.id!==b.id,e};a.storeState=function(b){return a.urlToId[b.url]=b.id,a.storedStates.push(a.cloneObject(b)),b};a.isLastSavedState=function(){return a.savedStates.length&&a.getLastSavedState(),!1};a.saveState=function(b){return a.isLastSavedState(b)?!1:(a.savedStates.push(a.cloneObject(b)),!0)};a.getStateByIndex=function(a){return null};
a.getHash=function(){return a.unescapeHash(b.location.hash)};a.unescapeString=function(a){for(var b;;){b=c.unescape(a);if(b===a)break;a=b}return a};a.unescapeHash=function(b){b=a.normalizeHash(b);return b=a.unescapeString(b),b};a.normalizeHash=function(a){return a.replace(/[^#]*#/,"").replace(/#.*/,"")};a.setHash=function(h,e){var d,c,f;return!1!==e&&a.busy()?(a.pushQueue({scope:a,callback:a.setHash,args:arguments,queue:e}),!1):(d=a.escapeHash(h),a.busy(!0),c=a.extractState(h,!0),c&&!a.emulated.pushState?
a.pushState(c.data,c.title,c.url,!1):b.location.hash!==d&&(a.bugs.setHash?(f=a.getPageUrl(),a.pushState(null,null,f+"#"+d,!1)):b.location.hash=d),a)};a.escapeHash=function(b){b=a.normalizeHash(b);return b=c.escape(b),a.bugs.hashEscape||(b=b.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),b};a.getHashByUrl=function(b){b=(""+b).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return b=a.unescapeHash(b),b};a.setTitle=function(c){var e=c.title,d;e||(d=a.getStateByIndex(0),d&&
d.url===c.url&&(e=d.title||a.options.initialTitle));try{b.getElementsByTagName("title")[0].innerHTML=e.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(f){}return b.title=e,a};a.queues=[];a.busy=function(b){"undefined"!=typeof b?a.busy.flag=b:"undefined"==typeof a.busy.flag&&(a.busy.flag=!1);if(!a.busy.flag){o(a.busy.timeout);var c=function(){var b,h,f;if(!a.busy.flag)for(b=a.queues.length-1;0<=b;--b)h=a.queues[b],0!==h.length&&(f=h.shift(),a.fireQueueItem(f),a.busy.timeout=
g(c,a.options.busyDelay))};a.busy.timeout=g(c,a.options.busyDelay)}return a.busy.flag};a.busy.flag=!1;a.fireQueueItem=function(b){return b.callback.apply(b.scope||a,b.args||[])};a.pushQueue=function(b){return a.queues[b.queue||0]=a.queues[b.queue||0]||[],a.queues[b.queue||0].push(b),a};a.queue=function(b,c){return"function"==typeof b&&(b={callback:b}),"undefined"!=typeof c&&(b.queue=c),a.busy()?a.pushQueue(b):a.fireQueueItem(b),a};a.clearQueue=function(){return a.busy.flag=!1,a.queues=[],a};a.stateChanged=
!1;a.doubleChecker=!1;a.doubleCheckComplete=function(){return a.stateChanged=!0,a.doubleCheckClear(),a};a.doubleCheckClear=function(){return a.doubleChecker&&(o(a.doubleChecker),a.doubleChecker=!1),a};a.doubleCheck=function(b){return a.stateChanged=!1,a.doubleCheckClear(),a.bugs.ieDoubleCheck&&(a.doubleChecker=g(function(){return a.doubleCheckClear(),a.stateChanged||b(),!0},a.options.doubleCheckInterval)),a};a.safariStatePoll=function(){var h=a.extractState(b.location.href);if(!a.isLastSavedState(h))return h||
a.createStateObject(),a.Adapter.trigger(c,"popstate"),a};a.back=function(b){return!1!==b&&a.busy()?(a.pushQueue({scope:a,callback:a.back,args:arguments,queue:b}),!1):(a.busy(!0),a.doubleCheck(function(){a.back(!1)}),p.go(-1),!0)};a.forward=function(b){return!1!==b&&a.busy()?(a.pushQueue({scope:a,callback:a.forward,args:arguments,queue:b}),!1):(a.busy(!0),a.doubleCheck(function(){a.forward(!1)}),p.go(1),!0)};a.go=function(b,c){var d;if(0<b)for(d=1;d<=b;++d)a.forward(c);else{if(!(0>b))throw Error("History.go: History.go requires a positive or negative integer passed.");
for(d=-1;d>=b;--d)a.back(c)}return a};if(a.emulated.pushState){var r=function(){};a.pushState=a.pushState||r;a.replaceState=a.replaceState||r}else a.onPopState=function(h,e){var d=!1,f=!1,g,i;return a.doubleCheckComplete(),g=a.getHash(),g?(i=a.extractState(g||b.location.href,!0),i?a.replaceState(i.data,i.title,i.url,!1):(a.Adapter.trigger(c,"anchorchange"),a.busy(!1)),a.expectedStateId=!1,!1):(d=a.Adapter.extractEventData("state",h,e)||!1,d?f=a.getStateById(d):a.expectedStateId?f=a.getStateById(a.expectedStateId):
f=a.extractState(b.location.href),f||(f=a.createStateObject(null,null,b.location.href)),a.expectedStateId=!1,a.isLastSavedState(f)?(a.busy(!1),!1):(a.storeState(f),a.saveState(f),a.setTitle(f),a.Adapter.trigger(c,"statechange"),a.busy(!1),!0))},a.Adapter.bind(c,"popstate",a.onPopState),a.pushState=function(b,e,d,f){if(a.getHashByUrl(d)&&a.emulated.pushState)throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==f&&a.busy())return a.pushQueue({scope:a,
callback:a.pushState,args:arguments,queue:f}),!1;a.busy(!0);var g=a.createStateObject(b,e,d);return a.isLastSavedState(g)?a.busy(!1):(a.storeState(g),a.expectedStateId=g.id,p.pushState(g.id,g.title,g.url),a.Adapter.trigger(c,"popstate")),!0},a.replaceState=function(b,e,d,f){if(a.getHashByUrl(d)&&a.emulated.pushState)throw Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==f&&a.busy())return a.pushQueue({scope:a,callback:a.replaceState,args:arguments,queue:f}),
!1;a.busy(!0);var g=a.createStateObject(b,e,d);return a.isLastSavedState(g)?a.busy(!1):(a.storeState(g),a.expectedStateId=g.id,p.replaceState(g.id,g.title,g.url),a.Adapter.trigger(c,"popstate")),!0};if(f){try{a.store=l.parse(f.getItem("History.store"))||{}}catch(s){a.store={}}a.normalizeStore()}else a.store={},a.normalizeStore();a.Adapter.bind(c,"beforeunload",a.clearAllIntervals);a.Adapter.bind(c,"unload",a.clearAllIntervals);a.saveState(a.storeState(a.extractState(b.location.href,!0)));f&&(a.onUnload=
function(){var b,c;try{b=l.parse(f.getItem("History.store"))||{}}catch(d){b={}}b.idToState=b.idToState||{};b.urlToId=b.urlToId||{};b.stateToId=b.stateToId||{};for(c in a.idToState)a.idToState.hasOwnProperty(c)&&(b.idToState[c]=a.idToState[c]);for(c in a.urlToId)a.urlToId.hasOwnProperty(c)&&(b.urlToId[c]=a.urlToId[c]);for(c in a.stateToId)a.stateToId.hasOwnProperty(c)&&(b.stateToId[c]=a.stateToId[c]);a.store=b;a.normalizeStore();f.setItem("History.store",l.stringify(b))},a.intervalList.push(k(a.onUnload,
a.options.storeInterval)),a.Adapter.bind(c,"beforeunload",a.onUnload),a.Adapter.bind(c,"unload",a.onUnload));if(!a.emulated.pushState&&(a.bugs.safariPoll&&a.intervalList.push(k(a.safariStatePoll,a.options.safariPollInterval)),"Apple Computer, Inc."===i.vendor||"Mozilla"===(i.appCodeName||"")))a.Adapter.bind(c,"hashchange",function(){a.Adapter.trigger(c,"popstate")}),a.getHash()&&a.Adapter.onDomLoad(function(){a.Adapter.trigger(c,"hashchange")})};a.init()})(window);

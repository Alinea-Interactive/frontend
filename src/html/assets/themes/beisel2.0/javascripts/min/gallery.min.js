var Gallery=function(f){var h=function(c,a){return void 0===typeof c||null==c?a:c},j=function(c){var a={href:c},c=c.replace("//","/").split("/");a.protocol=c[0];a.host=c[1];c[1]=c[1].split(":");a.hostname=c[1][0];a.port=1<c[1].length?c[1][1]:"";c.splice(0,2);a.pathname="/"+c.join("/");a.pathname=a.pathname.split("#");a.hash=1<a.pathname.length?"#"+a.pathname[1]:"";a.pathname=a.pathname[0];a.pathname=a.pathname.split("?");a.search=1<a.pathname.length?"?"+a.pathname[1]:"";a.pathname=a.pathname[0];return a},
k=function(c,a){for(var e=[],d=0;0<a.length&&d<c;){var b=a.shift();e.push(b);d+=b.photo960x180[1]+6}b=d-c;if(0<e.length&&0<b){var i=d,d=[],h=0,g;for(g in e)d[g]=Math.floor(e[g].photo960x180[1]/i*b),h+=d[g];for(b-=h;0<b;)for(g in d)if(d[g]++,b--,0==b)break;for(var f in e)g=d[f],b=e[f],b.vx=Math.floor(g/2),b.vwidth=b.photo960x180[1]-g}else for(f in e)b=e[f],b.vx=0,b.vwidth=b.photo960x180[1];return e},l=function(c,a){var e=f('<div class="imageContainer"/>'),d=f("<div/>");d.css("width",""+h(a.vwidth,
120)+"px");d.css("height",""+h(a.path960x180[1],120)+"px");d.css("overflow","hidden");var b=j(a.url),i=f("<a/>");i.attr("href",b.pathname);b=f("<img/>");b.attr("src",a.path960x180);b.attr("class","photo-view-modal-click");b.attr("title",a.title);b.css("width",""+h(a.path960x180[1],120)+"px");b.css("height",""+h(a.path960x180[2],120)+"px");b.css("margin-left",""+(a.vx?-a.vx:0)+"px");b.css("margin-top","0px");b.hide();i.append(b);d.append(i);e.append(d);b.bind("load",function(){f(this).fadeIn(500)});
c.append(e);return a.el=e};return{showImages:function(c,a){for(var e=c.width()-1,d=a.slice(),b=[];0<d.length;)b.push(k(e,d));for(var f in b)for(var j in b[f])if(e=b[f][j],e.el){var d=e.el.find("div:first"),g=d.find("img:first");d.css("width",""+h(e.vwidth,120)+"px");d.css("height",""+h(e.theight,120)+"px");g.css("margin-left",""+(e.vx?-e.vx:0)+"px");g.css("margin-top","0px")}else l(c,e);c.append('<br clear="all"/>')}}}(jQuery);
